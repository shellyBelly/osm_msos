var msos={default_locale:(document.getElementsByTagName("html")[0].getAttribute("lang")||"en"),default_translate:"fr",default_country:{en:"US",fr:"FR",de:"DE"},default_keyboard_locales:["en","fr","de","es"],base_site_url:"http://"+document.domain,base_script_url:"",base_config_url:"",base_images_url:"",body:null,head:null,html:null,docl:null,ajax_loading_kbps:{},deferred_css:[],deferred_scripts:[],dom:{},form_inputs:null,form_validate:null,html_inputs:["text","file","password","textarea","radio","checkbox","select"],html5_attributes:["autocomplete","autofocus","list","placeholder","max","min","maxlength","multiple","pattern","required","step"],html5_inputs:["search","tel","url","email","datetime","date","month","week","time","datetime-local","number","range","color"],i18n_order:[],i18n_queue:0,log_methods:["error","warn","info","debug","time","timeEnd","log"],onload_func_pre:[],onload_func_start:[],onload_functions:[],onload_func_done:[],onload_func_post:[],ondisplay_size_change:[],onorientationchange_functions:[],onresize_functions:[],record_times:{},registered_files:{js:{},css:{},ico:{},ajax:{}},registered_folders:{msos:"",jquery:"",apps:""},registered_modules:{msos:false},registered_templates:{},registered_tools:{},require_attempts:0,require_deferred:0,require_queue:0};msos.config={console:false,clear_cookies:false,clear_storage:false,debug:false,debug_css:false,debug_output:false,debug_script:false,mobile:false,verbose:false,visualevent:false,run_ads:false,run_analytics:false,run_onerror:false,run_overflowscroll:false,run_social:false,run_translate:false,run_amazon_prev:false,browser:{advanced:false,current:false,direction:"",editable:false,mobile:false,touch:false},cache:true,color:{bk:"black",wh:"white",dg:"darkgrey",lg:"lightgrey",sl:"salmon",lb:"lightblue",rd:"red",be:"beige"},connection:{type:0,bandwidth:10,metered:false},cookie:{site_pref:{name:"msos_site_pref",value:"",set:false,params:{expires:30}},site_i18n:{name:"msos_site_i18n",value:"",set:false,params:{expires:30}},site_cart:{name:"msos_site_cart",value:"",set:false,params:{expires:1}},site_cltl:{name:"msos_site_cltl",value:"",set:false,params:{expires:15}},site_bdwd:{name:"msos_site_bdwd",value:"",set:false,params:{expires:1}},site_tabs:{name:"msos_site_tab_",params:{expires:1}},site_sdmn:{name:"msos_site_sdm_",params:{expires:1}},site_popu:{name:"msos_site_pop_",params:{expires:1}}},debugging:["console","debug","debug_script","debug_css","debug_output","mobile","verbose","visualevent","run_ads","run_analytics","run_onerror","run_overflowscroll","run_social","run_translate","run_amazon_prev","use_date","use_color","use_number","use_range","clear_cookies","clear_storage"],doctype:window.document.getElementsByTagName("html")[0].getAttribute("xmlns")?"xhtml5":"html5",file:{"file":(typeof window.File==="object"?true:false),"reader":(typeof window.FileReader==="function"?true:false),"list":(typeof window.FileList==="object"?true:false),"blob":(typeof window.Blob==="object"?true:false)},force_shim:{inputs:{date:true,color:true,number:true,range:true,time:false,month:false,week:false},media:{video:false,audio:false}},google:{no_translate:{},hide_tooltip:{}},i18n:{select_trans_msos:{},select_kbrds_msos:{}},intl:{select_culture:{},select_calendar:{}},locale:(navigator.language||navigator.userLanguage||msos.default_locale).replace("-","_").toLowerCase(),culture:(navigator.language||navigator.userLanguage||msos.default_locale).replace("-","_").toLowerCase(),calendar:"standard",json:(typeof JSON==="object"&&typeof JSON.stringify==="function"&&typeof JSON.parse==="function"?true:false),jquery_ui_theme:"mobilesiteos",jquery_ui_avail:{base:"Base (generic)",lightness:"UI-Lightness",mobilesiteos:"MobileSiteOS"},keyboard:"",keyboard_locales:[].concat(msos.default_keyboard_locales),gesture:(function(){"use strict";var el=document.createElement("div");el.setAttribute("ongesturestart","return;");return (typeof el.ongesturestart==="function"?true:false);}()),onerror_uri:"http://"+window.location.hostname+"/onerror.html",orientation:(typeof window.orientation==="number"?true:false),orientation_change:("onorientationchange" in window?true:false),page_uri:window.location.href,pixel_ratio:window.devicePixelRatio||1,popups_blocked:false,query:{},script_onerror:(function(){"use strict";var _1=document.createElement("script");_1.type="text/javascript";_1.setAttribute("onerror","return;");if(typeof _1.onerror==="function"){return true;}return ("onerror" in _1?true:false);}()),script_preload:{available:false,async:false,defer:false,explicit:false,ordered:false,xhr_cache:false},scrolltop:(window.pageXOffset!==undefined||document.documentElement.scrollTop!==undefined?true:false),size:"phone",size_array:[],size_wide:{"desktop":1080,"large":960,"medium":760,"small":640,"tablet":480,"phone":320},social:{},storage:{sessionstorage:{site_bdwd:{name:"msos_site_bdwd",value:"",set:false}},localstorage:{site_form:{name:"msos_site_form",value:"",set:false}}},touch:{ontouchstart:("ontouchstart" in window?true:false),ontouchend:("ontouchend" in document?true:false),object:(typeof window.Touch==="object"?true:false),event:(window.TouchEvent!==undefined?true:false),create:("createTouch" in document?true:false),doc_touch:("DocumentTouch" in window&&document instanceof DocumentTouch?true:false)},view_orientation:{layout:"",direction:"",method:"",numeric:0},view_port:{height:0,width:0,delta_width:0,delta_heigth:0}};(function(_2){var _3={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href",embed:"src",object:"data"},_4=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],_5={"anchor":"fragment"},_6={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},_7=/^[0-9]+$/;function _8(_9,_a){var _b=decodeURI(_9),_c=_6[_a||false?"strict":"loose"].exec(_b),_d={attr:{},param:{},seg:{}},i=14;while(i--){_d.attr[_4[i]]=_c[i]||"";}_d.param["query"]=_e(_d.attr["query"]);_d.param["fragment"]=_e(_d.attr["fragment"]);_d.seg["path"]=_d.attr.path.replace(/^\/+|\/+$/g,"").split("/");_d.seg["fragment"]=_d.attr.fragment.replace(/^\/+|\/+$/g,"").split("/");_d.attr["base"]=_d.attr.host?(_d.attr.protocol?_d.attr.protocol+"://"+_d.attr.host:_d.attr.host)+(_d.attr.port?":"+_d.attr.port:""):"";return _d;};function _f(elm){var tn=elm.tagName;if(typeof tn!=="undefined"){return _3[tn.toLowerCase()];}return tn;};function _10(_11,key){if(_11[key].length===0){return _11[key]={};}var t={};for(var i in _11[key]){t[i]=_11[key][i];}_11[key]=t;return t;};function _12(_13,_14,key,val){var _15=_13.shift();if(!_15){if(_16(_14[key])){_14[key].push(val);}else{if("object"==typeof _14[key]){_14[key]=val;}else{if("undefined"==typeof _14[key]){_14[key]=val;}else{_14[key]=[_14[key],val];}}}}else{var obj=_14[key]=_14[key]||[];if("]"==_15){if(_16(obj)){if(""!==val){obj.push(val);}}else{if("object"==typeof obj){obj[_17(obj).length]=val;}else{obj=_14[key]=[_14[key],val];}}}else{if(~_15.indexOf("]")){_15=_15.substr(0,_15.length-1);if(!_7.test(_15)&&_16(obj)){obj=_10(_14,key);}_12(_13,obj,_15,val);}else{if(!_7.test(_15)&&_16(obj)){obj=_10(_14,key);}_12(_13,obj,_15,val);}}}};function _18(_19,key,val){if(~key.indexOf("]")){var _1a=key.split("[");_12(_1a,_19,"base",val);}else{if(!_7.test(key)&&_16(_19.base)){var t={};for(var k in _19.base){t[k]=_19.base[k];}_19.base=t;}if(key!==""){set(_19.base,key,val);}}return _19;};function _e(str){return _1b(String(str).split(/&|;/),function(ret,_1c){try{_1c=decodeURIComponent(_1c.replace(/\+/g," "));}catch(e){}var eql=_1c.indexOf("="),_1d=_1e(_1c),_4=_1c.substr(0,_1d||eql),val=_1c.substr(_1d||eql,_1c.length);val=val.substr(val.indexOf("=")+1,val.length);if(_4===""){_4=_1c;val="";}return _18(ret,_4,val);},{base:{}}).base;};function set(obj,key,val){var v=obj[key];if(typeof v==="undefined"){obj[key]=val;}else{if(_16(v)){v.push(val);}else{obj[key]=[v,val];}}};function _1e(str){var len=str.length,_1f,c;for(var i=0;i<len;++i){c=str[i];if("]"==c){_1f=false;}if("["==c){_1f=true;}if("="==c&&!_1f){return i;}}};function _1b(obj,_20){var i=0,l=obj.length>>0,_21=arguments[2];while(i<l){if(i in obj){_21=_20.call(undefined,_21,obj[i],i,obj);}++i;}return _21;};function _16(_22){return Object.prototype.toString.call(_22)==="[object Array]";};function _17(obj){var _23=[];for(var _24 in obj){if(obj.hasOwnProperty(_24)){_23.push(_24);}}return _23;};function _25(url,_26){if(arguments.length===1&&url===true){_26=true;url=undefined;}_26=_26||false;url=url||window.location.toString();return {data:_8(url,_26),attr:function(_27){_27=_5[_27]||_27;return typeof _27!=="undefined"?this.data.attr[_27]:this.data.attr;},param:function(_28){return typeof _28!=="undefined"?this.data.param.query[_28]:this.data.param.query;},fparam:function(_29){return typeof _29!=="undefined"?this.data.param.fragment[_29]:this.data.param.fragment;},segment:function(seg){if(typeof seg==="undefined"){return this.data.seg.path;}else{seg=seg<0?this.data.seg.path.length+seg:seg-1;return this.data.seg.path[seg];}},fsegment:function(seg){if(typeof seg==="undefined"){return this.data.seg.fragment;}else{seg=seg<0?this.data.seg.fragment.length+seg:seg-1;return this.data.seg.fragment[seg];}}};};_2.purl=_25;}(msos));msos.parse_query=function(){"use strict";var url=msos.purl(),key="",cfg="",_2a=url.param();for(key in _2a){if(_2a[key]==="true"){_2a[key]=true;}if(_2a[key]==="false"){_2a[key]=false;}}for(cfg in msos.config){if(_2a[cfg]||_2a[cfg]===false){msos.config[cfg]=_2a[cfg];}}if(msos.config.verbose){msos.config.debug=true;}return _2a;};msos.config.query=msos.parse_query();Object.keys(msos.config.size_wide).map(function(k){return [k,msos.config.size_wide[k]];}).sort(function(a,b){if(a[1]<b[1]){return -1;}if(a[1]>b[1]){return 1;}return 0;}).forEach(function(d){msos.config.size_array.push(d[0]);});msos.config.size_array.reverse();msos.console=(function(){"use strict";var _2b={queue:[]},_2c=window.console,idx=msos.log_methods.length-1,aps=Array.prototype.slice;while(idx>=0){(function(_2d){_2b[_2d]=function(){if(_2d==="debug"&&!msos.config.debug){return;}var _2e=aps.apply(arguments),_2f=_2e[0]?_2e[0].replace(/\W/g,"_"):"missing_args",_30=_2c[_2d]||_2c.log,_31=[];if(_2d==="time"||_2d==="timeEnd"){msos.record_times[_2f+"_"+_2d]=(new Date()).getTime();}if(msos.config.console){_31=[_2d].concat(_2e);if(_2d==="time"||_2d==="timeEnd"){_31.push(msos.record_times[_2f+"_"+_2d]);}_2b.queue.push(_31);}if(_2c){if(_30.apply){_30.apply(_2c,arguments);}else{var _32=_2e.join(" ");_30(_32);}}};}(msos.log_methods[idx]));idx-=1;}return _2b;}());msos.console.time("base");msos.console.info("msos/base -> start.");msos.var_is_null=function(_33){"use strict";if(_33===undefined){return true;}if(_33===null){return true;}return false;};msos.var_is_empty=function(_34){"use strict";if(msos.var_is_null(_34)){return true;}if(_34===""){return true;}return false;};msos.do_nothing=function(evt){"use strict";evt.preventDefault();evt.stopPropagation();};msos.do_abs_nothing=function(evt){"use strict";evt.preventDefault();evt.stopImmediatePropagation();};msos.new_time=function(){"use strict";return (new Date()).getTime();};msos.set_version=function(mjr,mnr,pth){"use strict";var _35=this;_35={major:mjr,minor:mnr,patch:pth,toString:function(){return "v"+_35.major+"."+_35.minor+"."+_35.patch;}};return _35;};msos.gen_namespace=function(b){"use strict";var a=window,c=0;b=b.split(".");for(c=0;c<b.length;c+=1){a=a[b[c]]||(a[b[c]]={});}return a;};msos.generate_url_name=function(url){"use strict";var _36,_37=[],pl=0,j=0,idx=0,_38="",_39="";_36=msos.purl(url).attr("path");_37=_36.split("/");pl=_37.length;_38=_37[pl-1];idx=_38.indexOf("?");_39=idx!==-1?_38.substring(0,idx):_38;for(j=2;j<(pl-j);j+=1){_39=_37[pl-j]+":"+_39;}return _39.replace(/[^0-9a-zA-Z]/g,"_");};msos.run_function_array=function(_3a){"use strict";var _3b="msos.run_func_array -> ",m=0;_3a=_3a||"missing";msos.console.debug(_3b+"start: "+_3a);if(!msos[_3a]||!(_.isArray(msos[_3a]))){msos.console.error(_3b+"for name: "+_3a+", failed.");return;}for(m=0;m<msos[_3a].length;m+=1){msos.console.debug(_3b+"index: "+m);try{msos[_3a][m]();}catch(e){msos.console.error(_3b+"for: "+_3a+", name: "+e.name+", error: "+e.message);}}msos[_3a]=[];msos.console.debug(_3b+"done: "+_3a);};msos.get_js_base=function(){"use strict";var _3c="msos.get_js_base -> ",_3d,_3e,_3f;msos.console.debug(_3c+"start.");_3d=document.getElementsByTagName("script");_3e=_3d[_3d.length-1];_3f=_3e.src;_3f=_3f.slice(0,_3f.lastIndexOf("/")+1)||"";if(!_3f){throw new Error(_3c+"failed!");}msos.console.debug(_3c+"done, uri: "+_3f);return _3f;};msos.base_script_url=msos.get_js_base();msos.resource_url=function(_40,_41){"use strict";return msos.base_script_url.replace(/\/msos\//,"/"+_40+"/")+_41;};msos.cookie=function(_42,_43,_44){"use strict";var _45="msos.cookie -> ",_46="",_47=null,_48="",_49="",_4a="",_4b="",_4c=[],_4d="",_4e="",i=0;if(msos.config.verbose){msos.console.debug(_45+"start, "+(_43?"set":"get")+" for "+_42);}if(_43!==undefined){_44=_44||{expires:90,path:"/"};if(_43===null){_43="";_44.expires=-1;msos.console.debug(_45+"delete: "+_42);}if(_44.expires&&(typeof _44.expires==="number"||_44.expires.toUTCString)){if(typeof _44.expires==="number"){_47=new Date();_47.setTime(_47.getTime()+(_44.expires*86400000));}else{_47=_44.expires;}_46="; expires="+_47.toUTCString();}_48=_44.path?"; path="+(_44.path):"; path=/";_49=_44.domain?"; domain="+(_44.domain):"";_4a=_44.secure?"; secure":"";_4b=[_42,"=",encodeURIComponent(_43),_46,_48,_49,_4a].join("");document.cookie=_4b;if(msos.config.verbose){msos.console.debug(_45+"done, set: "+_4b);}return true;}_4e="";if(document.cookie&&document.cookie!==""){_4c=document.cookie.split(";");for(i=0;i<_4c.length;i+=1){_4d=_4c[i];_4d=_4d.replace(/^\s+|\s+$/g,"");if(_4d.substring(0,_42.length+1)===(_42+"=")){_4e=decodeURIComponent(_4d.substring(_42.length+1));break;}}}if(msos.config.verbose){msos.console.debug(_45+"done, get: "+(_4e||"na"));}return _4e;};msos.clear_cookies=function(){"use strict";var _4f="msos.clear_cookies -> ",idx=0,_50=["site_pref","site_i18n","site_cart","site_cltl","site_bdwd"],_51;msos.console.debug(_4f+"start.");for(idx=0;idx<_50.length;idx+=1){_51=msos.config.cookie[_50[idx]]||0;if(_51){msos.cookie(_51.name,null);}}msos.console.debug(_4f+"done!");};if(msos.config.clear_cookies){msos.clear_cookies();}msos.set_locale=function(){"use strict";var _52="msos.set_locale -> ",cfg=msos.config,_53=cfg.cookie.site_i18n,_54=[];if(_53.value){_54=_53.value.split(":");}msos.console.debug(_52+"start, cookie: "+(_53.value||"na"));cfg.locale=cfg.query.locale||_54[0]||cfg.locale||msos.default_locale;cfg.culture=cfg.query.culture||_54[1]||cfg.culture||cfg.locale;cfg.calendar=cfg.query.calendar||_54[2]||cfg.calendar;msos.console.debug(_52+"done, locale: "+cfg.locale+", culture: "+cfg.culture+", calendar: "+cfg.calendar);};msos.set_locale_cookie=function(){"use strict";var _55="msos.set_locale_cookie -> ",_56=msos.config.cookie.site_i18n;msos.console.debug(_55+"start.");_56.value=msos.config.locale+":"+msos.config.culture+":"+msos.config.calendar;msos.cookie(_56.name,_56.value,_56.params);msos.console.debug(_55+"done, value: "+_56.value);_56.set=true;};msos.get_viewport=function(_57){"use strict";var d=_57.document,dd=d.documentElement,b=d.body||d.getElementsByTagName("body")[0],_58={width:0,height:0},_59="msos.get_viewport -> ";if(_57.innerWidth!==undefined){_58.width=_57.innerWidth;_58.height=_57.innerHeight;_59+="innerWidth/Height spec";}else{if(dd&&dd.clientWidth){_58.width=dd.clientWidth;_58.height=dd.clientHeight;_59+="documentElement.clientWidth/Height spec";}else{if(b&&b.clientWidth){_58.width=b.clientWidth;_58.height=b.clientHeight;_59+="body.clientWidth/Height spec";}else{if(window!==_57){_59+="failed for (popup window), this";}else{_59+="failed for this";}}}}if(window===_57){msos.config.view_port=_58;}msos.console.debug(_59+" browser.");return _58;};msos.browser_orientation=function(){"use strict";var _5a=msos.config.view_orientation,_5b=msos.get_viewport(window),_5c="msos.browser_orientation -> ";if(window.orientation!==undefined){switch(window.orientation){case 0:_5a.layout="portrait";_5a.direction="normal";_5a.numeric=0;break;case -90:_5a.layout="landscape";_5a.direction="right";_5a.numeric=-90;break;case 90:_5a.layout="landscape";_5a.direction="left";_5a.numeric=90;break;case 180:_5a.layout="portrait";_5a.direction="flipped";_5a.numeric=180;break;default:_5a.layout=_5b.width/_5b.height<1.1?"portrait":"landscape";_5a.direction="normal";_5a.numeric=_5b.width/_5b.height<1.1?0:90;}_5a.method="window.orientation("+window.orientation+")";}else{_5a.layout=_5b.width/_5b.height<1.1?"portrait":"landscape";_5a.direction="normal";_5a.method="document.documentElement";_5a.numeric=_5b.width/_5b.height<1.1?0:90;}msos.console.debug(_5c+"layout: "+_5a.layout+", dir: "+_5a.direction+" for "+_5a.method);return _5a;};msos.browser_current=function(){"use strict";var _5d="msos.browser_current -> ",_5e=[];if(!window.focus){_5e.push("window.focus");}if(!document.images){_5e.push("document.images");}if(!document.styleSheets){_5e.push("document.styleSheets");}if(!document.open){_5e.push("document.open");}if(!document.close){_5e.push("document.close");}if(!window.document.write){_5e.push("document.write");}if(!document.addEventListener){_5e.push("document.addEventListener");}if(_5e.length===0){msos.console.debug(_5d+"browser is current");msos.config.browser.current=true;return;}msos.console.warn(_5d+"browser does not support: "+_5e.join(", ")+" -> for doctype "+msos.config.doctype);if(msos.config.doctype==="xhtml5"&&_5e[2]==="document.write"){msos.config.browser.current=true;return;}msos.console.error(_5d+"browser is not current");msos.config.browser.current=false;};msos.browser_touch=function(){"use strict";var _5f="msos.browser_touch -> ",_60="",_61=document.createElement("div"),_62=0;for(_60 in msos.config.touch){if(msos.config.touch[_60]===true){_62+=1;}else{_62-=1;}}try{document.createEvent("TouchEvent");_62+=1;}catch(e){_62-=1;}if("ontouchstart" in _61){_62+=1;}else{_61.setAttribute("ontouchstart","return;");_62+=(typeof _61.ontouchstart==="function")?1:-1;}_61=null;if(_62>0){msos.config.browser.touch=true;}msos.console.debug(_5f+"touch is "+(msos.config.browser.touch?"":"not")+" available, ref. ("+String(_62)+")");};msos.browser_mobile=function(){"use strict";var _63="msos.browser_mobile -> ",_64="",_65=0,_66=[];if(!msos.var_is_empty(screen.height)&&!msos.var_is_empty(screen.width)){_65=(screen.height>screen.width)?screen.height:screen.width;}if(_65&&_65<481){_66.push("screen");}if(msos.config.browser.touch){_66.push("touch");}if(msos.config.orientation){_66.push("orientation");}if(msos.config.orientation_change){_66.push("orientation_change");}if(msos.config.pixel_ratio>1){_66.push("pixel_ratio");}if(_66.length>2){msos.config.browser.mobile=true;msos.config.mobile=true;}msos.console.debug(_63+"browser is "+(msos.config.browser.mobile?"mobile":"not mobile")+(_66.length>0?", flag(s): "+_66.join(", "):""));if(msos.config.query.mobile===true||msos.config.query.mobile===false){if(msos.config.browser.mobile!==msos.config.query.mobile){msos.console.debug(_63+"force mobile setting: "+msos.config.query.mobile);}msos.config.mobile=msos.config.query.mobile?true:false;}};msos.browser_advanced=function(){"use strict";var _67="msos.browser_advanced -> ",_68=document.createElement("body"),_69=_68.style,_6a=[],_6b=["Webkit","Moz","O","ms","Khtml"],_6c=null,_6d=null;_6c=function(_6e){var _6f=_6e.charAt(0).toUpperCase()+_6e.substr(1),_70=(_6e+" "+_6b.join(_6f+" ")+_6f).split(" "),v="";for(v in _70){if(_69[v]!==undefined){return true;}}_6a.push(_6e);return false;};msos.config.css_pseudoelement=(!!_6c("content"));msos.config.boxshadow=(!!_6c("boxShadow")&&!window.blackberry);msos.config.transform=(!!_6c("Transform"));_6d=function(){var i=0;for(i=0;i<_6b.length;i+=1){if(window[_6b[i]+"WebSocket"]){return true;}}return ("WebSocket" in window);};msos.config.websocket=_6d();if(!msos.config.scrolltop){_6a.push("scrollTop");}_68=null;if(_6a[0]){msos.console.debug(_67+"browser is not advanced, missing: "+_6a.join(" "));msos.config.browser.advanced=false;return false;}msos.console.debug(_67+"browser is advanced.");msos.config.browser.advanced=true;return true;};msos.browser_editable=function(){"use strict";if(!(document.designMode||msos.body.contentEditable)){msos.config.browser.editable=false;return;}if(document.execCommand===undefined){msos.config.browser.editable=false;return;}msos.console.debug("msos.browser_editable -> browser supports content editing");msos.config.browser.editable=true;};msos.browser_direction=function(){"use strict";var _71="",_72=null;_72=function(){var _73=document.createElement("p"),_74=document.createElement("span"),_75="";_73.style.margin="0 0 0 0";_73.style.padding="0 0 0 0";_73.style.textAlign="";_74.innerHTML="X";_73.appendChild(_74);document.body.appendChild(_73);_75=_74.offsetLeft<(_73.offsetWidth-(_74.offsetLeft+_74.offsetWidth))?"ltr":"rtl";msos.body.removeChild(_73);if(msos.config.verbose){msos.console.debug("msos.browser_direction -> by build_test: "+_75);}return _75;};_71=(msos.body.dir||document.documentElement.dir||_72()||"ltr").toLowerCase();msos.config.browser.direction=_71;};msos.browser_preloading=function(){"use strict";var _76=msos.config.script_preload,_77=document.createElement("script"),dua=navigator.userAgent;_76.async="async" in _77?true:false;_76.defer="defer" in _77?true:false;_76.explicit=typeof _77.preload==="boolean"?true:false;_76.available=_76.explicit?true:(_77.readyState&&_77.readyState==="uninitialized")?true:false;_76.ordered=(!_76.available&&_77.async===true)?true:false;_76.xhr_cache=(_76.available||(!_76.ordered&&!(dua.indexOf("Opera")!==-1)&&!(dua.indexOf("Gecko")!==-1)))?true:false;_77=null;};msos.get_head=function(win){"use strict";var d=win.document,de=d.documentElement,hd=d.head||d.getElementsByTagName("head")[0];if(!hd){hd=d.createElement("head");de.insertBefore(hd,de.firstChild);}return hd;};msos.create_node=function(tag,_78,win){"use strict";if(!win){win=window;}var _79=win.document.createElement(tag),at="";if(msos.config.verbose){msos.console.debug("msos.create_node -> called for: "+tag,_78);}for(at in _78){_79.setAttribute(at,_78[at]);}return _79;};msos.loader=function(win){"use strict";var _7a="msos.loader",_7b=this,_7c=msos.purl().attr("file"),i=0;if(!win){win=window;}if(!win.msos){win.msos={};}if(!win.name){win.name=_7c.replace(/[^0-9a-zA-Z]/g,"_")||"base_win";}if(!win.msos.registered_files){win.msos.registered_files={js:{},css:{},ico:{},ajax:{}};}msos.console.debug(_7a+" -> start for window: "+win.name);this.doc_head=msos.get_head(win);this.toggle_css=[];this.delay_css=0;this.deferred_array=[];this.deferred_done=true;this.add_resource_onload=[];this.load=function(_7d,url,_7e,_7f){var _80=url.split("?")[0],ext=_80.substr(_80.lastIndexOf(".")+1),_81=/^js|css|ico$/,lo=" - load -> ",_82=null;if(msos.config.verbose){msos.console.debug(_7a+lo+"start.");}_7f=_7f||{};if(!_7e){_7e=ext||"na";}if(!_81.test(_7e)){msos.console.error(_7a+lo+"missing or invalid: "+_7e);return;}if(_7b.check(_7d,url,_7e)){msos.console.debug(_7a+lo+"already loaded: "+_7d+", url: "+url);}else{_82=function(){_7b.resource(_7d,url,_7e,_7f);};if(_7f.defer&&_7f.defer==="defer"){if(msos.config.script_preload.ordered){_82();msos.console.debug(_7a+lo+"browser deferred file: "+url);}else{if(_7b.deferred_done===true){_7b.deferred_done=false;_82();}else{_7b.deferred_array.push(_82);}msos.console.debug(_7a+lo+"deferred file: "+url+", queue: "+_7b.deferred_array.length);}}else{if(_7e==="css"){setTimeout(_82,_7b.delay_css);_7b.delay_css+=5;msos.console.debug(_7a+lo+"css file: "+url+", delay: "+_7b.delay_css);}else{_82();msos.console.debug(_7a+lo+"file: "+url);}}}if(msos.config.verbose){msos.console.debug(_7a+lo+"done!");}};this.check=function(_83,_84,_85){var _86=_7b.toggle_css,_87=false,ld=" - check -> ";msos.console.debug(_7a+ld+"start.");if(win.msos.registered_files[_85]&&win.msos.registered_files[_85][_83]){_87=true;}if(_85==="css"&&_86.length>0){for(i=0;i<_86.length;i+=1){if(win.msos.registered_files.css[_86[i]]){win.msos.registered_files.css[_86[i]].disabled=true;}}if(win.msos.registered_files.css[_83]){win.msos.registered_files.css[_83].disabled=false;msos.console.debug(_7a+ld+"set active: "+_84);}for(i=0;i<_7b.add_resource_onload.length;i+=1){_7b.add_resource_onload[i]();}}msos.console.debug(_7a+ld+"done, already loaded (t/f): "+(_87?"true":"false")+" for "+_83);return _87;};this.init_create_node=function(_88,url,_89,_8a){var _8b=null,icn=" - init_create_node -> ",_8c={},ats="";if(msos.config.verbose){msos.console.debug(_7a+icn+"start.");}if(msos.config.cache===false){url+=((/\?.*$/.test(url)?"&_":"?_")+~~(Math.random()*1000000000)+"=");}if(_89==="js"){_8c={id:_88,type:"text/javascript",src:url,charset:"utf-8"};}else{if(_89==="css"){_8c={id:_88,type:"text/css",rel:"stylesheet",href:url,media:"all"};}else{if(_89==="ico"){_8c={id:_88,type:"image/x-icon",rel:"shortcut icon",href:url};}}}if(_8a!==undefined&&typeof _8a==="object"){for(ats in _8a){_8c[ats]=_8a[ats];}}if(_89==="js"){_8b=msos.create_node("script",_8c,win);if(_8a.defer==="defer"){_8b.async=false;}else{_8b.async=true;}}else{if(_89==="css"){_8b=msos.create_node("link",_8c,win);}else{if(_89==="ico"){_8b=msos.create_node("link",_8c,win);}}}_8b.msos_load_state="loading";if(_89==="js"&&msos.config.script_onerror){_8b.onerror=function(e){msos.console.error(_7a+" -> failed for: "+_88,e);};}if(msos.config.verbose){msos.console.debug(_7a+icn+"done!");}return _8b;};this.resource=function(_8d,_8e,_8f,_90){var _91=_7b.init_create_node(_8d,_8e,_8f,_90)||null,ls=" - resource -> ",_92=function(){var i=0,_93;if(this.msos_load_state!=="loaded"&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete"||this.readyState==="uninitialized")){if(msos.config.verbose){msos.console.debug(_7a+ls+"loaded, name: "+this.id);}this.msos_load_state="loaded";for(i=0;i<_7b.add_resource_onload.length;i+=1){_7b.add_resource_onload[i]();}if(this.getAttribute("defer")==="defer"){if(_7b.deferred_array.length){_93=_7b.deferred_array.shift();_93();}else{_7b.deferred_done=true;}}this.onload=this.onreadystatechange=null;}return true;};msos.console.debug(_7a+ls+"start, type: "+_8f+", name: "+_8d);if(_91!==null){_91.onload=_91.onreadystatechange=_92;_7b.doc_head.appendChild(_91);win.msos.registered_files[_8f][_8d]=_91;msos.console.debug(_7a+ls+"done!");}};msos.console.debug(_7a+" -> done!");};msos.dom_tracking=function(_94){"use strict";var _95="msos.dom_tracking";if(msos.dom[_94]){msos.console.error(_95+" -> failed, jQuery.fn."+_94+" already registered.");return;}msos.dom[_94]=[];var _96=jQuery.fn[_94];jQuery.fn[_94]=function(){var _97=_95+" - "+_94,_98=[];msos.console.debug(_97+" -> start.");jQuery.each(this,function(_99,_9a){var trk=msos.dom[_94],tag=_9a.tagName,id=_9a.id||"trk_"+tag.toLowerCase()+"_"+(trk.length+1),$el=jQuery(_9a);if(!_9a.id){_9a.id=id;}if(trk.indexOf(id)===-1){trk.push(id);_98.push(_9a);$el.data(id,true);if(msos.config.verbose){msos.console.debug(_97+" -> skipped: "+id);}}else{if($el.data(id)!==true){_98.push(_9a);$el.data(id,true);msos.console.debug(_97+" -> new instance: "+id);}}});msos.console.debug(_97+" -> done!");return (_96.apply(jQuery(_98),arguments));};};msos.set_environment=function(){"use strict";var _9b="msos.set_environment -> ",_9c=msos.config.cookie;msos.console.debug(_9b+"start");_9c.site_pref.value=msos.cookie(_9c.site_pref.name);_9c.site_i18n.value=msos.cookie(_9c.site_i18n.name);_9c.site_bdwd.value=msos.cookie(_9c.site_bdwd.name);msos.browser_current();msos.browser_advanced();msos.browser_editable();msos.browser_orientation();msos.browser_touch();msos.browser_mobile();msos.browser_preloading();if(msos.config.verbose){msos.console.debug(_9b+"done, browser env: ",msos.config.browser);}else{msos.console.debug(_9b+"done!");}};msos.calc_display_size=function(){"use strict";var _9d="",_9e=msos.config.view_port,_9f=0,_a0=0,_a1=0,_a2="",_a3=0;if(!msos.var_is_empty(_9e.width)&&_9e.width!==0){_9f=_9e.width;}if(!msos.var_is_empty(screen.width)&&screen.width!==0){_a0=screen.width;}_a1=_9f||_a0;for(_a2 in msos.config.size_wide){_a3=msos.config.size_wide[_a2]-(msos.config.size_wide[_a2]*0.03);if(_a1>_a3){if(_9d){if(msos.config.size_wide[_9d]<msos.config.size_wide[_a2]){_9d=_a2;}}else{_9d=_a2;}}}msos.console.debug("msos.calc_display_size -> calculated: "+_9d+", viewport w: "+_9e.width+", screen w: "+screen.width);return _9d;};msos.get_display_size=function(){"use strict";var _a4="msos.get_display_size -> ",_a5=msos.config.cookie.site_pref.value,_a6=msos.config.view_orientation.layout,_a7=[],_a8="";msos.console.debug(_a4+"start.");if(_a5){_a7=_a5.split(":");if(_a6==="portrait"){_a8=_a7[0]||"";}else{_a8=_a7[1]||"";}msos.console.debug(_a4+"cookie detected: "+_a5);}else{_a7[0]="unknown";_a7[1]="unknown";}_a7[2]=_a6;if(_a8==="unknown"){_a8="";}msos.config.size=msos.config.query.size||_a8||msos.calc_display_size()||msos.config.size;if(msos.config.query.size){msos.console.info(_a4+"size set by input!");}if(_a6==="portrait"){_a7[0]=msos.config.size;}else{_a7[1]=msos.config.size;}_a5=_a7.join(":");msos.config.cookie.site_pref.value=_a5;msos.console.debug(_a4+"done: "+msos.config.size+", for "+_a6);};msos.css_loader=function(_a9,win){"use strict";var _aa="msos.css_loader -> ",_ab=null,_ac="",_ad="",i=0;msos.console.debug(_aa+"start.");_ab=new msos.loader(win);for(i=0;i<_a9.length;i+=1){_ad=_a9[i];_ac=msos.generate_url_name(_ad);_ab.load(_ac,_ad,"css");}msos.console.debug(_aa+"done!");};msos.script_loader=function(_ae){"use strict";var _af="msos.script_loader -> ",_b0=null,_b1="",_b2="",i=0;msos.console.debug(_af+"start.");_b0=new msos.loader();for(i=0;i<_ae.length;i+=1){_b2=_ae[i];_b1=msos.generate_url_name(_b2);_b0.load(_b1,_b2,"js",{defer:"defer"});}msos.console.debug(_af+"done!");};msos.set_environment();msos.set_locale();msos.get_display_size();msos.console.info("msos/base -> done!");msos.console.timeEnd("base");