var msos={default_locale:(document.getElementsByTagName("html")[0].getAttribute("lang")||"en"),default_translate:"fr",default_country:{en:"US",fr:"FR",de:"DE"},default_keyboard_locales:["en","fr","de","es"],base_site_url:"http://"+document.domain,base_script_url:"",base_config_url:"",base_images_url:"",body:null,head:null,html:null,docl:null,ajax_loading_kbps:{},deferred_css:[],deferred_scripts:[],dom:{},form_inputs:null,form_validate:null,html_inputs:["text","file","password","textarea","radio","checkbox","select"],html5_attributes:["autocomplete","autofocus","list","placeholder","max","min","maxlength","multiple","pattern","required","step"],html5_inputs:["search","tel","url","email","datetime","date","month","week","time","datetime-local","number","range","color"],i18n_order:[],i18n_queue:0,log_methods:["error","warn","info","debug","time","timeEnd","log"],onload_func_pre:[],onload_func_start:[],onload_functions:[],onload_func_done:[],onload_func_post:[],ondisplay_size_change:[],onorientationchange_functions:[],onresize_functions:[],record_times:{},registered_files:{js:{},css:{},ico:{},ajax:{}},registered_folders:{msos:"",jquery:"",apps:""},registered_modules:{msos:false},registered_templates:{},registered_tools:{},require_attempts:0,require_deferred:0,require_queue:0};msos.config={console:false,clear_cookies:false,clear_storage:false,debug:false,debug_css:false,debug_output:false,debug_script:false,mobile:false,verbose:false,visualevent:false,run_ads:false,run_analytics:false,run_onerror:false,run_overflowscroll:false,run_social:false,run_translate:false,run_amazon_prev:false,browser:{advanced:false,current:false,direction:"",editable:false,mobile:false,touch:false},cache:true,color:{bk:"black",wh:"white",dg:"darkgrey",lg:"lightgrey",sl:"salmon",lb:"lightblue",rd:"red",be:"beige"},connection:{type:0,bandwidth:10,metered:false},cookie:{site_pref:{name:"msos_site_pref",value:"",set:false,params:{expires:30}},site_i18n:{name:"msos_site_i18n",value:"",set:false,params:{expires:30}},site_cart:{name:"msos_site_cart",value:"",set:false,params:{expires:1}},site_cltl:{name:"msos_site_cltl",value:"",set:false,params:{expires:15}},site_bdwd:{name:"msos_site_bdwd",value:"",set:false,params:{expires:1}},site_tabs:{name:"msos_site_tab_",params:{expires:1}},site_sdmn:{name:"msos_site_sdm_",params:{expires:1}},site_popu:{name:"msos_site_pop_",params:{expires:1}}},debugging:["console","debug","debug_script","debug_css","debug_output","mobile","verbose","visualevent","run_ads","run_analytics","run_onerror","run_overflowscroll","run_social","run_translate","run_amazon_prev","use_date","use_color","use_number","use_range","clear_cookies","clear_storage"],doctype:window.document.getElementsByTagName("html")[0].getAttribute("xmlns")?"xhtml5":"html5",file:{"file":(typeof window.File==="object"?true:false),"reader":(typeof window.FileReader==="function"?true:false),"list":(typeof window.FileList==="object"?true:false),"blob":(typeof window.Blob==="object"?true:false)},force_shim:{inputs:{date:true,color:true,number:true,range:true,time:false,month:false,week:false},media:{video:false,audio:false}},google:{no_translate:{},hide_tooltip:{}},hellojs_redirect:"/mobilesiteos/hello/redirect.html",i18n:{select_trans_msos:{},select_kbrds_msos:{}},intl:{select_culture:{},select_calendar:{}},locale:(navigator.language||navigator.userLanguage||msos.default_locale).replace("-","_").toLowerCase(),culture:(navigator.language||navigator.userLanguage||msos.default_locale).replace("-","_").toLowerCase(),calendar:"standard",json:(typeof JSON==="object"&&typeof JSON.stringify==="function"&&typeof JSON.parse==="function"?true:false),jquery_ui_theme:"mobilesiteos",jquery_ui_avail:{base:"Base (generic)",lightness:"UI-Lightness",mobilesiteos:"MobileSiteOS"},keyboard:"",keyboard_locales:[].concat(msos.default_keyboard_locales),gesture:(function(){"use strict";var el=document.createElement("div");el.setAttribute("ongesturestart","return;");return (typeof el.ongesturestart==="function"?true:false);}()),onerror_uri:"http://"+window.location.hostname+"/onerror.html",orientation:(typeof window.orientation==="number"?true:false),orientation_change:("onorientationchange" in window?true:false),page_uri:window.location.href,pixel_ratio:window.devicePixelRatio||1,popups_blocked:false,query:{},script_onerror:(function(){"use strict";var _1=document.createElement("script");_1.type="text/javascript";_1.setAttribute("onerror","return;");if(typeof _1.onerror==="function"){return true;}return ("onerror" in _1?true:false);}()),script_preload:{available:false,async:false,defer:false,explicit:false,ordered:false,xhr_cache:false},scrolltop:(window.pageXOffset!==undefined||document.documentElement.scrollTop!==undefined?true:false),size:"phone",size_array:[],size_wide:{"desktop":1080,"large":960,"medium":760,"small":640,"tablet":480,"phone":320},social:{},storage:{sessionstorage:{site_bdwd:{name:"msos_site_bdwd",value:"",set:false}},localstorage:{site_form:{name:"msos_site_form",value:"",set:false}}},touch:{ontouchstart:("ontouchstart" in window?true:false),ontouchend:("ontouchend" in document?true:false),object:(typeof window.Touch==="object"?true:false),event:(window.TouchEvent!==undefined?true:false),create:("createTouch" in document?true:false),doc_touch:("DocumentTouch" in window&&document instanceof DocumentTouch?true:false)},view_orientation:{layout:"",direction:"",method:"",numeric:0},view_port:{height:0,width:0,delta_width:0,delta_heigth:0}};(function(_2){var _3={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href",embed:"src",object:"data"},_4=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],_5={"anchor":"fragment"},_6={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},_7=/^[0-9]+$/;function _8(_9,_a){var _b=decodeURI(_9),_c=_6[_a||false?"strict":"loose"].exec(_b),_d={attr:{},param:{},seg:{}},i=14;while(i--){_d.attr[_4[i]]=_c[i]||"";}_d.param["query"]=_e(_d.attr["query"]);_d.param["fragment"]=_e(_d.attr["fragment"]);_d.seg["path"]=_d.attr.path.replace(/^\/+|\/+$/g,"").split("/");_d.seg["fragment"]=_d.attr.fragment.replace(/^\/+|\/+$/g,"").split("/");_d.attr["base"]=_d.attr.host?(_d.attr.protocol?_d.attr.protocol+"://"+_d.attr.host:_d.attr.host)+(_d.attr.port?":"+_d.attr.port:""):"";return _d;};function _f(elm){var tn=elm.tagName;if(typeof tn!=="undefined"){return _3[tn.toLowerCase()];}return tn;};function _10(_11,key){if(_11[key].length===0){return _11[key]={};}var t={};for(var i in _11[key]){t[i]=_11[key][i];}_11[key]=t;return t;};function _12(_13,_14,key,val){var _15=_13.shift();if(!_15){if(_16(_14[key])){_14[key].push(val);}else{if("object"==typeof _14[key]){_14[key]=val;}else{if("undefined"==typeof _14[key]){_14[key]=val;}else{_14[key]=[_14[key],val];}}}}else{var obj=_14[key]=_14[key]||[];if("]"==_15){if(_16(obj)){if(""!==val){obj.push(val);}}else{if("object"==typeof obj){obj[_17(obj).length]=val;}else{obj=_14[key]=[_14[key],val];}}}else{if(~_15.indexOf("]")){_15=_15.substr(0,_15.length-1);if(!_7.test(_15)&&_16(obj)){obj=_10(_14,key);}_12(_13,obj,_15,val);}else{if(!_7.test(_15)&&_16(obj)){obj=_10(_14,key);}_12(_13,obj,_15,val);}}}};function _18(_19,key,val){if(~key.indexOf("]")){var _1a=key.split("[");_12(_1a,_19,"base",val);}else{if(!_7.test(key)&&_16(_19.base)){var t={};for(var k in _19.base){t[k]=_19.base[k];}_19.base=t;}if(key!==""){set(_19.base,key,val);}}return _19;};function _e(str){return _1b(String(str).split(/&|;/),function(ret,_1c){try{_1c=decodeURIComponent(_1c.replace(/\+/g," "));}catch(e){}var eql=_1c.indexOf("="),_1d=_1e(_1c),_4=_1c.substr(0,_1d||eql),val=_1c.substr(_1d||eql,_1c.length);val=val.substr(val.indexOf("=")+1,val.length);if(_4===""){_4=_1c;val="";}return _18(ret,_4,val);},{base:{}}).base;};function set(obj,key,val){var v=obj[key];if(typeof v==="undefined"){obj[key]=val;}else{if(_16(v)){v.push(val);}else{obj[key]=[v,val];}}};function _1e(str){var len=str.length,_1f,c;for(var i=0;i<len;++i){c=str[i];if("]"==c){_1f=false;}if("["==c){_1f=true;}if("="==c&&!_1f){return i;}}};function _1b(obj,_20){var i=0,l=obj.length>>0,_21=arguments[2];while(i<l){if(i in obj){_21=_20.call(undefined,_21,obj[i],i,obj);}++i;}return _21;};function _16(_22){return Object.prototype.toString.call(_22)==="[object Array]";};function _17(obj){var _23=[];for(var _24 in obj){if(obj.hasOwnProperty(_24)){_23.push(_24);}}return _23;};function _25(url,_26){if(arguments.length===1&&url===true){_26=true;url=undefined;}_26=_26||false;url=url||window.location.toString();return {data:_8(url,_26),attr:function(_27){_27=_5[_27]||_27;return typeof _27!=="undefined"?this.data.attr[_27]:this.data.attr;},param:function(_28){return typeof _28!=="undefined"?this.data.param.query[_28]:this.data.param.query;},fparam:function(_29){return typeof _29!=="undefined"?this.data.param.fragment[_29]:this.data.param.fragment;},segment:function(seg){if(typeof seg==="undefined"){return this.data.seg.path;}else{seg=seg<0?this.data.seg.path.length+seg:seg-1;return this.data.seg.path[seg];}},fsegment:function(seg){if(typeof seg==="undefined"){return this.data.seg.fragment;}else{seg=seg<0?this.data.seg.fragment.length+seg:seg-1;return this.data.seg.fragment[seg];}}};};_2.purl=_25;}(msos));msos.parse_query=function(){"use strict";var url=msos.purl(),key="",cfg="",_2a=url.param();for(key in _2a){if(_2a[key]==="true"){_2a[key]=true;}if(_2a[key]==="false"){_2a[key]=false;}}for(cfg in msos.config){if(_2a[cfg]||_2a[cfg]===false){msos.config[cfg]=_2a[cfg];}}if(msos.config.verbose){msos.config.debug=true;}return _2a;};msos.config.query=msos.parse_query();Object.keys(msos.config.size_wide).map(function(k){return [k,msos.config.size_wide[k]];}).sort(function(a,b){if(a[1]<b[1]){return -1;}if(a[1]>b[1]){return 1;}return 0;}).forEach(function(d){msos.config.size_array.push(d[0]);});msos.config.size_array.reverse();msos.console=(function(){"use strict";var _2b={queue:[]},_2c=window.console,idx=msos.log_methods.length-1,aps=Array.prototype.slice;while(idx>=0){(function(_2d){_2b[_2d]=function(){var cfg=msos.config,_2e=cfg.query.debug_filter||"";if(_2d==="debug"&&!cfg.debug){return;}var _2f=aps.apply(arguments),_30=_2f[0]?_2f[0].replace(/\W/g,"_"):"missing_args",_31=_2c[_2d]||_2c.log,_32=[];if(_2d==="debug"&&cfg.verbose&&_2e&&/^[0-9a-zA-Z.]+$/.test(_2e)){_2e=new RegExp("^"+_2e.replace(".","."));if(!_30.match(_2e)){return;}}if(_2d==="time"||_2d==="timeEnd"){msos.record_times[_30+"_"+_2d]=(new Date()).getTime();}if(cfg.console){_32=[_2d].concat(_2f);if(_2d==="time"||_2d==="timeEnd"){_32.push(msos.record_times[_30+"_"+_2d]);}_2b.queue.push(_32);}if(_2c){if(_31.apply){_31.apply(_2c,arguments);}else{var _33=_2f.join(" ");_31(_33);}}};}(msos.log_methods[idx]));idx-=1;}return _2b;}());msos.console.time("base");msos.console.info("msos/base -> start.");msos.var_is_null=function(_34){"use strict";if(_34===undefined){return true;}if(_34===null){return true;}return false;};msos.var_is_empty=function(_35){"use strict";if(msos.var_is_null(_35)){return true;}if(_35===""){return true;}return false;};msos.do_nothing=function(evt){"use strict";evt.preventDefault();evt.stopPropagation();};msos.do_abs_nothing=function(evt){"use strict";evt.preventDefault();evt.stopImmediatePropagation();};msos.new_time=function(){"use strict";return (new Date()).getTime();};msos.set_version=function(mjr,mnr,pth){"use strict";var _36=this;_36={major:mjr,minor:mnr,patch:pth,toString:function(){return "v"+_36.major+"."+_36.minor+"."+_36.patch;}};return _36;};msos.gen_namespace=function(b){"use strict";var a=window,c=0;b=b.split(".");for(c=0;c<b.length;c+=1){a=a[b[c]]||(a[b[c]]={});}return a;};msos.generate_url_name=function(url){"use strict";var _37,_38=[],pl=0,j=0,idx=0,_39="",_3a="";_37=msos.purl(url).attr("path");_38=_37.split("/");pl=_38.length;_39=_38[pl-1];idx=_39.indexOf("?");_3a=idx!==-1?_39.substring(0,idx):_39;for(j=2;j<(pl-j);j+=1){_3a=_38[pl-j]+":"+_3a;}return _3a.replace(/[^0-9a-zA-Z]/g,"_");};msos.run_function_array=function(_3b){"use strict";var _3c="msos.run_func_array -> ",m=0;_3b=_3b||"missing";msos.console.debug(_3c+"start: "+_3b);if(!msos[_3b]||!(_.isArray(msos[_3b]))){msos.console.error(_3c+"for name: "+_3b+", failed.");return;}for(m=0;m<msos[_3b].length;m+=1){msos.console.debug(_3c+"index: "+m);try{msos[_3b][m]();}catch(e){msos.console.error(_3c+"for: "+_3b+", name: "+e.name+", error: "+e.message);}}msos[_3b]=[];msos.console.debug(_3c+"done: "+_3b);};msos.get_js_base=function(){"use strict";var _3d="msos.get_js_base -> ",_3e,_3f,_40;msos.console.debug(_3d+"start.");_3e=document.getElementsByTagName("script");_3f=_3e[_3e.length-1];_40=_3f.src;_40=_40.slice(0,_40.lastIndexOf("/")+1)||"";if(!_40){throw new Error(_3d+"failed!");}msos.console.debug(_3d+"done, uri: "+_40);return _40;};msos.base_script_url=msos.get_js_base();msos.resource_url=function(_41,_42){"use strict";return msos.base_script_url.replace(/\/msos\//,"/"+_41+"/")+_42;};msos.cookie=function(_43,_44,_45){"use strict";var _46="msos.cookie -> ",_47="",_48=null,_49="",_4a="",_4b="",_4c="",_4d=[],_4e="",_4f="",i=0;if(msos.config.verbose){msos.console.debug(_46+"start, "+(_44?"set":"get")+" for "+_43);}if(_44!==undefined){_45=_45||{expires:90,path:"/"};if(_44===null){_44="";_45.expires=-1;msos.console.debug(_46+"delete: "+_43);}if(_45.expires&&(typeof _45.expires==="number"||_45.expires.toUTCString)){if(typeof _45.expires==="number"){_48=new Date();_48.setTime(_48.getTime()+(_45.expires*86400000));}else{_48=_45.expires;}_47="; expires="+_48.toUTCString();}_49=_45.path?"; path="+(_45.path):"; path=/";_4a=_45.domain?"; domain="+(_45.domain):"";_4b=_45.secure?"; secure":"";_4c=[_43,"=",encodeURIComponent(_44),_47,_49,_4a,_4b].join("");document.cookie=_4c;if(msos.config.verbose){msos.console.debug(_46+"done, set: "+_4c);}return true;}_4f="";if(document.cookie&&document.cookie!==""){_4d=document.cookie.split(";");for(i=0;i<_4d.length;i+=1){_4e=_4d[i];_4e=_4e.replace(/^\s+|\s+$/g,"");if(_4e.substring(0,_43.length+1)===(_43+"=")){_4f=decodeURIComponent(_4e.substring(_43.length+1));break;}}}if(msos.config.verbose){msos.console.debug(_46+"done, get: "+(_4f||"na"));}return _4f;};msos.clear_cookies=function(){"use strict";var _50="msos.clear_cookies -> ",idx=0,_51=["site_pref","site_i18n","site_cart","site_cltl","site_bdwd"],_52;msos.console.debug(_50+"start.");for(idx=0;idx<_51.length;idx+=1){_52=msos.config.cookie[_51[idx]]||0;if(_52){msos.cookie(_52.name,null);}}msos.console.debug(_50+"done!");};if(msos.config.clear_cookies){msos.clear_cookies();}msos.set_locale=function(){"use strict";var _53="msos.set_locale -> ",cfg=msos.config,_54=cfg.cookie.site_i18n,_55=[];if(_54.value){_55=_54.value.split(":");}msos.console.debug(_53+"start, cookie: "+(_54.value||"na"));cfg.locale=cfg.query.locale||_55[0]||cfg.locale||msos.default_locale;cfg.culture=cfg.query.culture||_55[1]||cfg.culture||cfg.locale;cfg.calendar=cfg.query.calendar||_55[2]||cfg.calendar;msos.console.debug(_53+"done, locale: "+cfg.locale+", culture: "+cfg.culture+", calendar: "+cfg.calendar);};msos.set_locale_cookie=function(){"use strict";var _56="msos.set_locale_cookie -> ",_57=msos.config.cookie.site_i18n;msos.console.debug(_56+"start.");_57.value=msos.config.locale+":"+msos.config.culture+":"+msos.config.calendar;msos.cookie(_57.name,_57.value,_57.params);msos.console.debug(_56+"done, value: "+_57.value);_57.set=true;};msos.get_viewport=function(_58){"use strict";var d=_58.document,dd=d.documentElement,b=d.body||d.getElementsByTagName("body")[0],_59={width:0,height:0},_5a="msos.get_viewport -> ";if(_58.innerWidth!==undefined){_59.width=_58.innerWidth;_59.height=_58.innerHeight;_5a+="innerWidth/Height spec";}else{if(dd&&dd.clientWidth){_59.width=dd.clientWidth;_59.height=dd.clientHeight;_5a+="documentElement.clientWidth/Height spec";}else{if(b&&b.clientWidth){_59.width=b.clientWidth;_59.height=b.clientHeight;_5a+="body.clientWidth/Height spec";}else{if(window!==_58){_5a+="failed for (popup window), this";}else{_5a+="failed for this";}}}}if(window===_58){msos.config.view_port=_59;}msos.console.debug(_5a+" browser.");return _59;};msos.browser_orientation=function(){"use strict";var _5b=msos.config.view_orientation,_5c=msos.get_viewport(window),_5d="msos.browser_orientation -> ";if(window.orientation!==undefined){switch(window.orientation){case 0:_5b.layout="portrait";_5b.direction="normal";_5b.numeric=0;break;case -90:_5b.layout="landscape";_5b.direction="right";_5b.numeric=-90;break;case 90:_5b.layout="landscape";_5b.direction="left";_5b.numeric=90;break;case 180:_5b.layout="portrait";_5b.direction="flipped";_5b.numeric=180;break;default:_5b.layout=_5c.width/_5c.height<1.1?"portrait":"landscape";_5b.direction="normal";_5b.numeric=_5c.width/_5c.height<1.1?0:90;}_5b.method="window.orientation("+window.orientation+")";}else{_5b.layout=_5c.width/_5c.height<1.1?"portrait":"landscape";_5b.direction="normal";_5b.method="document.documentElement";_5b.numeric=_5c.width/_5c.height<1.1?0:90;}msos.console.debug(_5d+"layout: "+_5b.layout+", dir: "+_5b.direction+" for "+_5b.method);return _5b;};msos.browser_current=function(){"use strict";var _5e="msos.browser_current -> ",_5f=[];if(!window.focus){_5f.push("window.focus");}if(!document.images){_5f.push("document.images");}if(!document.styleSheets){_5f.push("document.styleSheets");}if(!document.open){_5f.push("document.open");}if(!document.close){_5f.push("document.close");}if(!window.document.write){_5f.push("document.write");}if(!document.addEventListener){_5f.push("document.addEventListener");}if(_5f.length===0){msos.console.debug(_5e+"browser is current");msos.config.browser.current=true;return;}msos.console.warn(_5e+"browser does not support: "+_5f.join(", ")+" -> for doctype "+msos.config.doctype);if(msos.config.doctype==="xhtml5"&&_5f[2]==="document.write"){msos.config.browser.current=true;return;}msos.console.error(_5e+"browser is not current");msos.config.browser.current=false;};msos.browser_touch=function(){"use strict";var _60="msos.browser_touch -> ",_61="",_62=document.createElement("div"),_63=0;for(_61 in msos.config.touch){if(msos.config.touch[_61]===true){_63+=1;}else{_63-=1;}}try{document.createEvent("TouchEvent");_63+=1;}catch(e){_63-=1;}if("ontouchstart" in _62){_63+=1;}else{_62.setAttribute("ontouchstart","return;");_63+=(typeof _62.ontouchstart==="function")?1:-1;}_62=null;if(_63>0){msos.config.browser.touch=true;}msos.console.debug(_60+"touch is "+(msos.config.browser.touch?"":"not")+" available, ref. ("+String(_63)+")");};msos.browser_mobile=function(){"use strict";var _64="msos.browser_mobile -> ",_65="",_66=0,_67=[];if(!msos.var_is_empty(screen.height)&&!msos.var_is_empty(screen.width)){_66=(screen.height>screen.width)?screen.height:screen.width;}if(_66&&_66<481){_67.push("screen");}if(msos.config.browser.touch){_67.push("touch");}if(msos.config.orientation){_67.push("orientation");}if(msos.config.orientation_change){_67.push("orientation_change");}if(msos.config.pixel_ratio>1){_67.push("pixel_ratio");}if(_67.length>2){msos.config.browser.mobile=true;msos.config.mobile=true;}msos.console.debug(_64+"browser is "+(msos.config.browser.mobile?"mobile":"not mobile")+(_67.length>0?", flag(s): "+_67.join(", "):""));if(msos.config.query.mobile===true||msos.config.query.mobile===false){if(msos.config.browser.mobile!==msos.config.query.mobile){msos.console.debug(_64+"force mobile setting: "+msos.config.query.mobile);}msos.config.mobile=msos.config.query.mobile?true:false;}};msos.browser_advanced=function(){"use strict";var _68="msos.browser_advanced -> ",_69=document.createElement("body"),_6a=_69.style,_6b=[],_6c=["Webkit","Moz","O","ms","Khtml"],_6d=null,_6e=null;_6d=function(_6f){var _70=_6f.charAt(0).toUpperCase()+_6f.substr(1),_71=(_6f+" "+_6c.join(_70+" ")+_70).split(" "),v="";for(v in _71){if(_6a[v]!==undefined){return true;}}_6b.push(_6f);return false;};msos.config.css_pseudoelement=(!!_6d("content"));msos.config.boxshadow=(!!_6d("boxShadow")&&!window.blackberry);msos.config.transform=(!!_6d("Transform"));_6e=function(){var i=0;for(i=0;i<_6c.length;i+=1){if(window[_6c[i]+"WebSocket"]){return true;}}return ("WebSocket" in window);};msos.config.websocket=_6e();if(!msos.config.scrolltop){_6b.push("scrollTop");}_69=null;if(_6b[0]){msos.console.debug(_68+"browser is not advanced, missing: "+_6b.join(" "));msos.config.browser.advanced=false;return false;}msos.console.debug(_68+"browser is advanced.");msos.config.browser.advanced=true;return true;};msos.browser_editable=function(){"use strict";if(!(document.designMode||msos.body.contentEditable)){msos.config.browser.editable=false;return;}if(document.execCommand===undefined){msos.config.browser.editable=false;return;}msos.console.debug("msos.browser_editable -> browser supports content editing");msos.config.browser.editable=true;};msos.browser_direction=function(){"use strict";var _72="",_73=null;_73=function(){var _74=document.createElement("p"),_75=document.createElement("span"),_76="";_74.style.margin="0 0 0 0";_74.style.padding="0 0 0 0";_74.style.textAlign="";_75.innerHTML="X";_74.appendChild(_75);document.body.appendChild(_74);_76=_75.offsetLeft<(_74.offsetWidth-(_75.offsetLeft+_75.offsetWidth))?"ltr":"rtl";msos.body.removeChild(_74);if(msos.config.verbose){msos.console.debug("msos.browser_direction -> by build_test: "+_76);}return _76;};_72=(msos.body.dir||document.documentElement.dir||_73()||"ltr").toLowerCase();msos.config.browser.direction=_72;};msos.browser_preloading=function(){"use strict";var _77=msos.config.script_preload,_78=document.createElement("script"),dua=navigator.userAgent;_77.async="async" in _78?true:false;_77.defer="defer" in _78?true:false;_77.explicit=typeof _78.preload==="boolean"?true:false;_77.available=_77.explicit?true:(_78.readyState&&_78.readyState==="uninitialized")?true:false;_77.ordered=(!_77.available&&_78.async===true)?true:false;_77.xhr_cache=(_77.available||(!_77.ordered&&!(dua.indexOf("Opera")!==-1)&&!(dua.indexOf("Gecko")!==-1)))?true:false;_78=null;};msos.get_head=function(win){"use strict";var d=win.document,de=d.documentElement,hd=d.head||d.getElementsByTagName("head")[0];if(!hd){hd=d.createElement("head");de.insertBefore(hd,de.firstChild);}return hd;};msos.create_node=function(tag,_79,win){"use strict";if(!win){win=window;}var _7a=win.document.createElement(tag),at="";if(msos.config.verbose){msos.console.debug("msos.create_node -> called for: "+tag,_79);}for(at in _79){_7a.setAttribute(at,_79[at]);}return _7a;};msos.loader=function(win){"use strict";var _7b="msos.loader",_7c=this,_7d=msos.purl().attr("file"),i=0;if(!win){win=window;}if(!win.msos){win.msos={};}if(!win.name){win.name=_7d.replace(/[^0-9a-zA-Z]/g,"_")||"base_win";}if(!win.msos.registered_files){win.msos.registered_files={js:{},css:{},ico:{},ajax:{}};}msos.console.debug(_7b+" -> start for window: "+win.name);this.doc_head=msos.get_head(win);this.toggle_css=[];this.delay_css=0;this.deferred_array=[];this.deferred_done=true;this.add_resource_onload=[];this.load=function(_7e,url,_7f,_80){var _81=url.split("?")[0],ext=_81.substr(_81.lastIndexOf(".")+1),_82=/^js|css|ico$/,lo=" - load -> ",_83=null;if(msos.config.verbose){msos.console.debug(_7b+lo+"start.");}_80=_80||{};if(!_7f){_7f=ext||"na";}if(!_82.test(_7f)){msos.console.error(_7b+lo+"missing or invalid: "+_7f);return;}if(_7c.check(_7e,url,_7f)){msos.console.debug(_7b+lo+"already loaded: "+_7e+", url: "+url);}else{_83=function(){_7c.resource(_7e,url,_7f,_80);};if(_80.defer&&_80.defer==="defer"){if(msos.config.script_preload.ordered){_83();msos.console.debug(_7b+lo+"browser deferred file: "+url);}else{if(_7c.deferred_done===true){_7c.deferred_done=false;_83();}else{_7c.deferred_array.push(_83);}msos.console.debug(_7b+lo+"deferred file: "+url+", queue: "+_7c.deferred_array.length);}}else{if(_7f==="css"){setTimeout(_83,_7c.delay_css);_7c.delay_css+=5;msos.console.debug(_7b+lo+"css file: "+url+", delay: "+_7c.delay_css);}else{_83();msos.console.debug(_7b+lo+"file: "+url);}}}if(msos.config.verbose){msos.console.debug(_7b+lo+"done!");}};this.check=function(_84,_85,_86){var _87=_7c.toggle_css,_88=false,ld=" - check -> ";msos.console.debug(_7b+ld+"start.");if(win.msos.registered_files[_86]&&win.msos.registered_files[_86][_84]){_88=true;}if(_86==="css"&&_87.length>0){for(i=0;i<_87.length;i+=1){if(win.msos.registered_files.css[_87[i]]){win.msos.registered_files.css[_87[i]].disabled=true;}}if(win.msos.registered_files.css[_84]){win.msos.registered_files.css[_84].disabled=false;msos.console.debug(_7b+ld+"set active: "+_85);}for(i=0;i<_7c.add_resource_onload.length;i+=1){_7c.add_resource_onload[i]();}}msos.console.debug(_7b+ld+"done, already loaded (t/f): "+(_88?"true":"false")+" for "+_84);return _88;};this.init_create_node=function(_89,url,_8a,_8b){var _8c=null,icn=" - init_create_node -> ",_8d={},ats="";if(msos.config.verbose){msos.console.debug(_7b+icn+"start.");}if(msos.config.cache===false){url+=((/\?.*$/.test(url)?"&_":"?_")+~~(Math.random()*1000000000)+"=");}if(_8a==="js"){_8d={id:_89,type:"text/javascript",src:url,charset:"utf-8"};}else{if(_8a==="css"){_8d={id:_89,type:"text/css",rel:"stylesheet",href:url,media:"all"};}else{if(_8a==="ico"){_8d={id:_89,type:"image/x-icon",rel:"shortcut icon",href:url};}}}if(_8b!==undefined&&typeof _8b==="object"){for(ats in _8b){_8d[ats]=_8b[ats];}}if(_8a==="js"){_8c=msos.create_node("script",_8d,win);if(_8b.defer==="defer"){_8c.async=false;}else{_8c.async=true;}}else{if(_8a==="css"){_8c=msos.create_node("link",_8d,win);}else{if(_8a==="ico"){_8c=msos.create_node("link",_8d,win);}}}_8c.msos_load_state="loading";if(_8a==="js"&&msos.config.script_onerror){_8c.onerror=function(e){msos.console.error(_7b+" -> failed for: "+_89,e);};}if(msos.config.verbose){msos.console.debug(_7b+icn+"done!");}return _8c;};this.resource=function(_8e,_8f,_90,_91){var _92=_7c.init_create_node(_8e,_8f,_90,_91)||null,ls=" - resource -> ",_93=function(){var i=0,_94;if(this.msos_load_state!=="loaded"&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete"||this.readyState==="uninitialized")){if(msos.config.verbose){msos.console.debug(_7b+ls+"loaded, name: "+this.id);}this.msos_load_state="loaded";for(i=0;i<_7c.add_resource_onload.length;i+=1){_7c.add_resource_onload[i]();}if(this.getAttribute("defer")==="defer"){if(_7c.deferred_array.length){_94=_7c.deferred_array.shift();_94();}else{_7c.deferred_done=true;}}this.onload=this.onreadystatechange=null;}return true;};msos.console.debug(_7b+ls+"start, type: "+_90+", name: "+_8e);if(_92!==null){_92.onload=_92.onreadystatechange=_93;_7c.doc_head.appendChild(_92);win.msos.registered_files[_90][_8e]=_92;msos.console.debug(_7b+ls+"done!");}};msos.console.debug(_7b+" -> done!");};msos.dom_tracking=function(_95){"use strict";var _96="msos.dom_tracking";if(msos.dom[_95]){msos.console.error(_96+" -> failed, jQuery.fn."+_95+" already registered.");return;}msos.dom[_95]=[];var _97=jQuery.fn[_95];jQuery.fn[_95]=function(){var _98=_96+" - "+_95,_99=[];msos.console.debug(_98+" -> start.");jQuery.each(this,function(_9a,_9b){var trk=msos.dom[_95],tag=_9b.tagName,id=_9b.id||"trk_"+tag.toLowerCase()+"_"+(trk.length+1),$el=jQuery(_9b);if(!_9b.id){_9b.id=id;}if(trk.indexOf(id)===-1){trk.push(id);_99.push(_9b);$el.data(id,true);if(msos.config.verbose){msos.console.debug(_98+" -> skipped: "+id);}}else{if($el.data(id)!==true){_99.push(_9b);$el.data(id,true);msos.console.debug(_98+" -> new instance: "+id);}}});msos.console.debug(_98+" -> done!");return (_97.apply(jQuery(_99),arguments));};};msos.set_environment=function(){"use strict";var _9c="msos.set_environment -> ",_9d=msos.config.cookie;msos.console.debug(_9c+"start");_9d.site_pref.value=msos.cookie(_9d.site_pref.name);_9d.site_i18n.value=msos.cookie(_9d.site_i18n.name);_9d.site_bdwd.value=msos.cookie(_9d.site_bdwd.name);msos.browser_current();msos.browser_advanced();msos.browser_editable();msos.browser_orientation();msos.browser_touch();msos.browser_mobile();msos.browser_preloading();if(msos.config.verbose){msos.console.debug(_9c+"done, browser env: ",msos.config.browser);}else{msos.console.debug(_9c+"done!");}};msos.calc_display_size=function(){"use strict";var _9e="",_9f=msos.config.view_port,_a0=0,_a1=0,_a2=0,_a3="",_a4=0;if(!msos.var_is_empty(_9f.width)&&_9f.width!==0){_a0=_9f.width;}if(!msos.var_is_empty(screen.width)&&screen.width!==0){_a1=screen.width;}_a2=_a0||_a1;for(_a3 in msos.config.size_wide){_a4=msos.config.size_wide[_a3]-(msos.config.size_wide[_a3]*0.03);if(_a2>_a4){if(_9e){if(msos.config.size_wide[_9e]<msos.config.size_wide[_a3]){_9e=_a3;}}else{_9e=_a3;}}}msos.console.debug("msos.calc_display_size -> calculated: "+_9e+", viewport w: "+_9f.width+", screen w: "+screen.width);return _9e;};msos.get_display_size=function(){"use strict";var _a5="msos.get_display_size -> ",_a6=msos.config.cookie.site_pref.value,_a7=msos.config.view_orientation.layout,_a8=[],_a9="";msos.console.debug(_a5+"start.");if(_a6){_a8=_a6.split(":");if(_a7==="portrait"){_a9=_a8[0]||"";}else{_a9=_a8[1]||"";}msos.console.debug(_a5+"cookie detected: "+_a6);}else{_a8[0]="unknown";_a8[1]="unknown";}_a8[2]=_a7;if(_a9==="unknown"){_a9="";}msos.config.size=msos.config.query.size||_a9||msos.calc_display_size()||msos.config.size;if(msos.config.query.size){msos.console.info(_a5+"size set by input!");}if(_a7==="portrait"){_a8[0]=msos.config.size;}else{_a8[1]=msos.config.size;}_a6=_a8.join(":");msos.config.cookie.site_pref.value=_a6;msos.console.debug(_a5+"done: "+msos.config.size+", for "+_a7);};msos.css_loader=function(_aa,win){"use strict";var _ab="msos.css_loader -> ",_ac=null,_ad="",_ae="",i=0;msos.console.debug(_ab+"start.");_ac=new msos.loader(win);for(i=0;i<_aa.length;i+=1){_ae=_aa[i];_ad=msos.generate_url_name(_ae);_ac.load(_ad,_ae,"css");}msos.console.debug(_ab+"done!");};msos.script_loader=function(_af){"use strict";var _b0="msos.script_loader -> ",_b1=null,_b2="",_b3="",i=0;msos.console.debug(_b0+"start.");_b1=new msos.loader();for(i=0;i<_af.length;i+=1){_b3=_af[i];_b2=msos.generate_url_name(_b3);_b1.load(_b2,_b3,"js",{defer:"defer"});}msos.console.debug(_b0+"done!");};msos.set_environment();msos.set_locale();msos.get_display_size();msos.console.info("msos/base -> done!");msos.console.timeEnd("base");