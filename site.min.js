msos.site={};msos.console.info("msos/site -> start.");msos.console.time("site");if(msos.config.visualevent){Element.prototype.recorded_addEventListener=[];Element.prototype.org_addEventListener=Element.prototype.addEventListener;Element.prototype.addEventListener=function(a,b,c){"use strict";this.org_addEventListener(a,b,c);if(typeof jQuery._data(jQuery(this)[0],"events")!=="object"){this.recorded_addEventListener.push({"type":a,"func":b.toString(),"removed":false,"source":"DOM 3 event"});}};}(function($){"use strict";$.fn.succinct=function(_1){var _2={size:240,omission:"...",ignore:true},_3=$.extend(_2,_1);return this.each(function(){var _4,_5,_6=$(this),_7=/[!-\/:-@\[-`{-~]$/;var _8=function(){_6.each(function(){_4=$(this).text();if(_4.length>_3.size){_5=$.trim(_4).substring(0,_3.size).split(" ").slice(0,-1).join(" ");if(_3.ignore){_5=_5.replace(_7,"");}$(this).text(_5+_3.omission);}});};var _9=function(){_8();};_9();});};})(jQuery);(function($){"use strict";$.fn.fitText=function(_a,_b){var _c=_a||1,_d=$.extend({"minFontSize":Number.NEGATIVE_INFINITY,"maxFontSize":Number.POSITIVE_INFINITY},_b);return this.each(function(){var _e=$(this);_e.css("font-size",Math.max(Math.min(_e.width()/(_c*10),parseFloat(_d.maxFontSize)),parseFloat(_d.minFontSize)));});};}(jQuery));msos.ondisplay_size_change.push(function(){"use strict";var _f=jQuery("#marquee");_f.hide();_f.fitText(0.8,{maxFontSize:_f.height()+"px"});_f.fadeIn("slow");});msos.site.likeness=function(_10,_11){"use strict";var _12="msos.site.likeness -> ",i=0,_13=0,_14,_15,_16="",_17="",_18,_19=0;if(msos.config.verbose){msos.console.debug(_12+"called, string: "+_10+", word: "+_11);}if(_10===_11){return 1;}if(msos.var_is_empty(_10)){msos.console.warn(_12+"called, string is empty!");return 0;}if(msos.var_is_empty(_11)){msos.console.warn(_12+"called, word is empty!");return 0;}_16=_10.toLowerCase();_17=_11.toLowerCase();for(i=0;i<_11.length;i+=1){_18=_16.indexOf(_17[i],_19);if(-1===_18){return 0;}else{if(_19===_18){_14=0.7;}else{_14=0.1;if(_10[_18-1]===" "){_14+=0.8;}}}if(_10[_18]===_11[i]){_14+=0.1;}_13+=_14;_19=_18+1;}_15=0.5*(_13/_10.length+_13/_11.length);if((_17[0]===_16[0])&&(_15<0.85)){_15+=0.15;}return _15;};msos.site.google_analytics=function(){"use strict";if(document.domain===msos.config.google.analytics_domain){var url=("https:"===document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",_1a=new msos.loader();_1a.load("google_analytics_api",url,"js");}else{msos.console.warn("msos.site.google_analytics -> please update msos.config.google.analytics_domain in config.js!");}};msos.site.addthis_share=function(){"use strict";msos.config.google.no_translate.by_id.push("#social_ties");var _1b="<div class=\"addthis_toolbox addthis_default_style \">"+"<a class=\"addthis_button_google_plusone_share\"></a>"+"<a class=\"addthis_button_preferred_1\"></a>"+"<a class=\"addthis_button_preferred_2\"></a>"+"<a class=\"addthis_button_preferred_3\"></a>"+"<a class=\"addthis_button_compact\"></a>"+"<a class=\"addthis_counter addthis_bubble_style\"></a>"+"</div>",_1c=function(){var atl=new msos.loader();atl.add_resource_onload.push(function(){setTimeout(addthis.init,250);});addthis_config.ui_language=msos.config.locale.replace("_","-");atl.load("addthis_share_api","//s7.addthis.com/js/300/addthis_widget.js#pubid="+msos.config.addthis_pubid+"&async=1&domready=1","js");};jQuery("#social_ties").html(_1b);msos.onload_func_post.push(_1c);};msos.site.auto_init=function(){"use strict";var _1d="msos.site.auto_init -> ",cfg=msos.config,_1e=msos.config.cookie.site_bdwd.value||"",_1f=_1e?parseInt(_1e,10):0;msos.console.debug(_1d+"start.");if(cfg.run_ads&&_1f>150&&jQuery("#google_ad").length===1&&jQuery("#rotate_marquee").length===1){msos.require("msos.google.ad");}if(cfg.run_social&&_1f>150&&jQuery("#social_ties").length){msos.site.addthis_share();}if(cfg.run_analytics&&_1f>150){msos.site.google_analytics();}if(cfg.run_translate&&_1f>150){msos.require("msos.google.translate");}if(Modernizr.csstransitions){msos.require("bootstrap.transition");}if(cfg.debug&&!Hammer.HAS_TOUCHEVENTS&&!Hammer.HAS_POINTEREVENTS){msos.require("hammer.util.showtouches");msos.require("hammer.util.fakemultitouch");}msos.console.debug(_1d+"done!");};msos.site.hammer_for_desktop=function(){"use strict";if(Hammer.plugins){if(Hammer.plugins.showTouches){Hammer.plugins.showTouches();}if(Hammer.plugins.fakeMultitouch){Hammer.plugins.fakeMultitouch();}}};msos.site.css_load=function(){"use strict";var _20="msos.site.css_load -> ",_21=null,M=Modernizr,_22=msos.config.connection.type;msos.console.debug(_20+"start.");if(_22==="slow"||_22==="2g"){msos.console.debug(_20+"done, skip for slow connection!");return;}_21=new msos.loader();if(M.cssgradients){_21.load("msos_gradient_css",msos.resource_url("css","msos_gradient.css"));}if(M.csstransitions){_21.load("msos_transition_css",msos.resource_url("css","msos_transition.css"));}if(M.cssanimations&&M.csstransforms){_21.load("msos_animation_css",msos.resource_url("css","msos_animation.css"));}msos.console.debug(_20+"done!");};msos.onload_func_pre.push(msos.site.auto_init);msos.onload_func_done.push(msos.site.hammer_for_desktop);msos.onload_func_post.push(msos.site.css_load);msos.console.info("msos/site -> done!");msos.console.timeEnd("site");